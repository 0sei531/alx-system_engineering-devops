#!/usr/bin/env bash
# Script to dig subdomain records for the domain specified

function get_a_records(){
    if [[ -n "$2" ]]; then
        response=$(dig "$2.$1" | grep -i -A1 "answer section" | tail -n 1)
        destination=$(echo "$response" | awk '{ print $5 }')
        record_type=$(echo "$response" | awk '{ print $4 }')
        printf "The subdomain %s is a %s record and points to %s\n" "$2" "$record_type" "$destination"

    else
        subdomains=(www lb-01 web-01 web-02)
        for sub_d in "${subdomains[@]}"; do
            response=$(dig "$sub_d.$1" | grep -i -A1 "answer section" | tail -n 1)
            destination=$(echo "$response" | awk '{ print $5 }')
            record_type=$(echo "$response" | awk '{ print $4 }')
            printf "The subdomain %s is a %s record and points to %s\n" "$sub_d" "$record_type" "$destination"
        done
    fi
}

get_a_records "$1" "$2"

