#!/usr/bin/env bash
# Script to retrieve DNS records for domains and subdomains

get_dns_records() {
    domain="$1"
    subdomains=("$@")  # Accept subdomains as arguments

    if [[ ${#subdomains[@]} -eq 0 ]]; then
        # If no subdomains are provided, use predefined ones
        subdomains=("www" "lb-01" "web-01" "web-02")
    fi

    for subdomain in "${subdomains[@]}"; do
        response=$(dig "$subdomain.$domain" +short)
        if [[ -n "$response" ]]; then
            # If there's a response, extract and print information
            record_type=$(dig "$subdomain.$domain" | awk '/ANSWER SECTION/ {getline; print $4}')
            destination=$(dig "$subdomain.$domain" | awk '/ANSWER SECTION/ {getline; print $5}')
            echo "The subdomain $subdomain is a $record_type record and points to $destination"
        else
            echo "No records found for $subdomain.$domain"
        fi
    done
}

# Example usage:
get_dns_records "example.com"

